<!DOCTYPE html>
<html lang="ja">
<head>
  <link rel="stylesheet" href="result-17.css">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title data-i18n="page.title">紹介ページ17</title>
  <style>
    .review-list {
      margin-top: 2em;
      padding: 1em;
      background: #fff7f7;
      color: #333;
      border-top: 2px solid #b71c1c;
      border-radius: 8px;
    }

    .review-item {
      margin-bottom: 1em;
      background: #fff;
      color: #333;
      padding: 1em;
      border-radius: 6px;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    }
  </style>
</head>
<body>

  <div class="container">
    <h1 data-i18n="mountain.title">あなたにおすすめの山は...十勝岳です！</h1>

    <div class="image-column">
      <img src="31151883" alt="画像1">
      <img src="DSC0065.jpg" alt="画像2">
    </div>

    <ul class="info-list">
      <li data-i18n="mountain.height">標高：2077m</li>
      <li data-i18n="mountain.location">場所：北海道上川地方、十勝連峰の主峰（活火山でありながら登山道は比較的整備されているが、山頂付近は風が強く変わりやすい天候に注意）</li>
      <li data-i18n="mountain.time">登山時間：登り約3〜4時間、下り約2〜3時間（距離は長めで、火山特有のザレ場や急登もあり、少し体力と技術が必要）</li>
      <li data-i18n="mountain.access">アクセス：車で旭川市や美瑛町から車で約1時間、バスは少ないため車やタクシー推奨</li>
    </ul>

    <div class="features">
      <h2 data-i18n="features.title">特徴</h2>
      <p data-i18n="features.point1">・噴煙が上がる火口や溶岩流跡、荒々しい地形を間近に体験できる</p>
      <p data-i18n="features.point2">・十勝平野や日高山脈、遠くには大雪山系が見渡せる大パノラマ</p>
      <p data-i18n="features.point3">・突然の強風や霧が多いため、天気予報と装備は入念に準備</p>
      <p data-i18n="features.point4">・一部急登や岩場、火山灰の滑りやすいザレ場があり、技術と体力アップに最適</p>
    </div>

    <div id="lang-switch" style="position: fixed; top: 10px; right: 10px; z-index: 1000; background: rgba(255,255,255,0.8); padding: 0.5em 1em; border-radius: 10px;">
      <button onclick="changeLang('ja')">日本語</button>
      <button onclick="changeLang('en')">English</button>
    </div>

    <div class="map-container">
      <iframe
        src="https://www.google.com/maps?q=十勝岳,北海道&output=embed"
        width="100%"
        height="400"
        style="border:0;"
        allowfullscreen=""
        loading="lazy">
      </iframe>
    </div>

    <div class="home-button">
      <a href="index.html" data-i18n="button.home">ホームページを見る</a>
    </div>

    <!-- ▼ 口コミ表示エリア ▼ -->
    <div class="review-list" id="review-list">
      <h2>みんなの口コミ</h2>
    </div>
  </div>

  <script src="https://unpkg.com/i18next@21.6.16/dist/umd/i18next.min.js"></script>
  <script>
    const resources = {
      ja: {
        translation: {
          "page.title": "紹介ページ17",
          "mountain.title": "あなたにおすすめの山は...十勝岳です！",
          "mountain.height": "標高：2077m",
          "mountain.location": "場所：北海道上川地方、十勝連峰の主峰（活火山でありながら登山道は比較的整備されているが、山頂付近は風が強く変わりやすい天候に注意）",
          "mountain.time": "登山時間：登り約3〜4時間、下り約2〜3時間（距離は長めで、火山特有のザレ場や急登もあり、少し体力と技術が必要）",
          "mountain.access": "アクセス：車で旭川市や美瑛町から車で約1時間、バスは少ないため車やタクシー推奨",
          "features.title": "特徴",
          "features.point1": "・噴煙が上がる火口や溶岩流跡、荒々しい地形を間近に体験できる",
          "features.point2": "・十勝平野や日高山脈、遠くには大雪山系が見渡せる大パノラマ",
          "features.point3": "・突然の強風や霧が多いため、天気予報と装備は入念に準備",
          "features.point4": "・一部急登や岩場、火山灰の滑りやすいザレ場があり、技術と体力アップに最適",
          "button.home": "ホームページを見る"
        }
      },
      en: {
        translation: {
          "page.title": "Recommendation Page 17",
          "mountain.title": "The mountain we recommend for you is... Mt. Tokachi!",
          "mountain.height": "Height: 2077m",
          "mountain.location": "Location: Kamikawa region, Hokkaido. The main peak of the Tokachi Range. Although it's an active volcano, the trail is relatively maintained. Be cautious of sudden weather changes near the summit.",
          "mountain.time": "Climbing Time: 3–4 hours up, 2–3 hours down. The route is long with steep and slippery volcanic areas. Moderate strength and skills needed.",
          "mountain.access": "Access: About 1 hour by car from Asahikawa or Biei. Buses are limited, so car or taxi is recommended.",
          "features.title": "Features",
          "features.point1": "・Experience active volcanic craters, lava flows, and rugged terrain up close",
          "features.point2": "・Panoramic views of Tokachi Plain, Hidaka Mountains, and the Daisetsuzan Range",
          "features.point3": "・Frequent sudden winds and fog – check weather and gear thoroughly",
          "features.point4": "・Challenging steep and rocky areas ideal for building skills and stamina",
          "button.home": "Go to Homepage"
        }
      }
    };

    i18next.init({ lng: 'ja', resources, interpolation: { escapeValue: false } }, function(err, t) {
      if (err) return console.error(err);
      updateTexts();
    });

    function updateTexts() {
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        const translated = i18next.t(key);
        if (el.tagName === 'TITLE') {
          document.title = translated;
        } else {
          el.innerHTML = translated;
        }
      });
    }

    function changeLang(lang) {
      i18next.changeLanguage(lang, function(err, t) {
        if (err) return console.error(err);
        updateTexts();
      });
    }

    // ▼ 口コミ読み込み表示機能 ▼
    function displayReviews() {
      const container = document.getElementById("review-list");
      const key = "review_data_result-17";
      const data = JSON.parse(localStorage.getItem(key) || "[]");

      if (data.length === 0) {
        container.innerHTML += "<p>まだ口コミが投稿されていません。</p>";
        return;
      }

      data.forEach((item, index) => {
        const div = document.createElement("div");
        div.className = "review-item";
        const stars = "★".repeat(item.rating) + "☆".repeat(5 - item.rating);
        const date = new Date(item.date).toLocaleString();

        div.innerHTML = `
          <p><strong>${stars}</strong> - <em>${item.name}</em> <span style="color:gray;">(${date})</span></p>
          <p>${item.comment}</p>
          <button onclick="deleteReview(${index})" style="color: red;">🗑 削除</button>
          <hr>
        `;
        container.appendChild(div);
      });
    }

    function deleteReview(index) {
      const key = "review_data_result-17";
      const data = JSON.parse(localStorage.getItem(key) || "[]");
      if (confirm("この口コミを削除しますか？")) {
        data.splice(index, 1);
        localStorage.setItem(key, JSON.stringify(data));
        location.reload();
      }
    }

    window.addEventListener("DOMContentLoaded", displayReviews);
  </script>

</body>
</html>
